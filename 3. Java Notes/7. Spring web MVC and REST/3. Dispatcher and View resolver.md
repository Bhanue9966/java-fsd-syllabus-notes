# üåê 7. Spring Web MVC and REST

## 03-dispatcher-view-resolver.md

### 1\. The DispatcherServlet: The Front Controller

As discussed, the **`DispatcherServlet`** is the single, central entry point for all incoming requests in a Spring MVC application. It implements the **Front Controller** pattern.

#### A. Role of the `DispatcherServlet`

Its primary responsibilities are:

  * **Request Interception:** It is the first component to receive an HTTP request.
  * **Delegation:** It delegates the request processing to other specialized components, such as `HandlerMapping`, `Controller`, and `ViewResolver`.
  * **Response Assembly:** It gathers the rendered View output and sends the final HTTP Response back to the client.

#### B. Configuration (Spring Boot vs. Traditional)

In a **traditional Servlet environment (pre-Spring Boot)**, you had to manually configure the `DispatcherServlet` in `web.xml`:

```xml
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern> </servlet-mapping>
```

In **Spring Boot**, the **`spring-boot-starter-web`** dependency and the `@SpringBootApplication` annotation handle this configuration **automatically**. By default, it registers the `DispatcherServlet` to handle the root path (`/`).

-----

### 2\. The ViewResolver: Mapping Names to Views

After a **Controller** processes a request and returns a **logical view name** (e.g., `"user-details"`), the **`ViewResolver`** is the component that translates that logical name into a concrete, executable view technology template (e.g., `user-details.html`).

#### A. Role of the `ViewResolver`

  * **Abstraction:** It allows the Controller to be decoupled from the specific view technology. The Controller only worries about the *name* of the resource.
  * **Template Location:** It prefixes and suffixes the logical view name to determine the full path to the view file.

#### B. Example: InternalResourceViewResolver (Traditional JSP)

This is common for older applications using JSP. It tells Spring to look for files in a specific folder and with a specific extension.

| Property | Value | Description |
| :--- | :--- | :--- |
| **Prefix** | `/WEB-INF/views/` | The path to the folder containing the views. |
| **Suffix** | `.jsp` | The file extension of the view templates. |

**Example Flow with `InternalResourceViewResolver`:**

1.  **Controller Returns:** `"welcome"`
2.  **View Resolver Creates Path:** `/WEB-INF/views/` + `welcome` + `.jsp`
3.  **Final View Location:** `/WEB-INF/views/welcome.jsp`

#### C. Example: ThymeleafViewResolver (Modern Spring Boot)

In a Spring Boot application using the **Thymeleaf** template engine, Spring Boot auto-configures the `ThymeleafViewResolver` with these sensible defaults:

| Property | Default Value |
| :--- | :--- |
| **Prefix** | `classpath:/templates/` |
| **Suffix** | `.html` |

**Example Flow with ThymeleafViewResolver:**

1.  **Controller Returns:** `"products/list"`
2.  **View Resolver Creates Path:** `classpath:/templates/` + `products/list` + `.html`
3.  **Final View Location:** `src/main/resources/templates/products/list.html`

### 3\. Code Example: View Resolver in Action

Here is a simple Controller demonstrating the logical name return:

**`src/main/java/com/example/web/WelcomeController.java`**

```java
package com.example.web;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class WelcomeController {

    @GetMapping("/greeting")
    public String handleWelcome() {
        // The Controller returns the logical view name: "welcome"
        return "welcome"; 
    }
}
```

If we use the default Spring Boot/Thymeleaf setup:

  * The `DispatcherServlet` delegates `/greeting` to `handleWelcome()`.
  * `handleWelcome()` returns `"welcome"`.
  * The `ThymeleafViewResolver` resolves `"welcome"` to the template file located at **`src/main/resources/templates/welcome.html`**.

The next section will detail how the request gets mapped to the correct handler method within the controller using annotations.
