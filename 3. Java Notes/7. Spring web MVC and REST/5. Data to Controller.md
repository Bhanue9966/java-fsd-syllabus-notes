# üåê 7. Spring Web MVC and REST

## 05-data-to-controller.md

### ‚û°Ô∏è Passing Data to the Controller

Controller methods need access to input data coming from the HTTP request. Spring provides several annotations to bind data from different parts of the request (URI, query parameters, request body) directly to method parameters.

### 1\. Path Variables (`@PathVariable`)

The `@PathVariable` annotation is used to extract values directly from the **URI path** itself. This is primarily used to identify a specific resource, following the RESTful standard.

#### Code Example

If the client makes a request to `/users/105/profile`:

```java
@Controller
@RequestMapping("/users")
public class UserController {
    
    // The value inside the path, {userId}, is bound to the Long parameter 'id'
    @GetMapping("/{userId}/profile") 
    public String viewUserProfile(@PathVariable("userId") Long id) {
        System.out.println("Fetching profile for User ID: " + id);
        // Business logic uses 'id' to load the user
        return "user-profile";
    }
}
```

  * **Request URL:** `GET /users/105/profile`
  * **Method Parameter Value:** `id` will be `105`.

-----

### 2\. Request Parameters (`@RequestParam`)

The `@RequestParam` annotation is used to extract values from the **query string** (the part of the URL after the `?`). These parameters are typically used for filtering, searching, or pagination.

#### Code Example

If the client makes a request to `/products?category=electronics&page=2`:

```java
@Controller
@RequestMapping("/products")
public class ProductController {
    
    // 'category' is required, 'page' is optional (default value is 1)
    @GetMapping
    public String searchProducts(
        @RequestParam("category") String cat, 
        @RequestParam(name = "page", required = false, defaultValue = "1") int pageNum) 
    {
        System.out.println("Searching products in category: " + cat);
        System.out.println("Fetching page number: " + pageNum);
        
        // Logic to execute search using cat and pageNum
        return "product-search-results";
    }
}
```

  * **Request URL:** `GET /products?category=electronics&page=2`
  * **Method Parameter Values:** `cat` will be `"electronics"`, `pageNum` will be `2`.
  * **Required Parameter:** If the client omitted `category`, Spring would return an HTTP 400 (Bad Request) error unless `required = false` was set.

-----

### 3\. Request Body (`@RequestBody`)

The `@RequestBody` annotation is used to bind the entire contents of the HTTP request body to a **Java object**. This is essential for handling complex data submissions like JSON or XML, typically used with **`@PostMapping`** or **`@PutMapping`** endpoints in REST APIs.

  * **Mechanism:** Spring uses an appropriate **`HttpMessageConverter`** (e.g., Jackson for JSON) to deserialize the raw request body into the specified Java object type.

#### Code Example

Assume the client sends a JSON body: `{"name": "New Item", "price": 50.00}`

```java
package com.example.model;

public class Item { // POJO for the request body
    private String name;
    private double price;
    // Getters and Setters...
}

@RestController // Often used with @RequestBody
@RequestMapping("/items")
public class ItemController {
    
    // Spring automatically deserializes the JSON body into an Item object
    @PostMapping
    public String createItem(@RequestBody Item newItem) {
        System.out.println("Received new item: " + newItem.getName() + " priced at $" + newItem.getPrice());
        // Logic to save newItem to the database
        return "Item created successfully!";
    }
}
```

  * **Request Method:** `POST`
  * **Content-Type Header:** Must be set to `application/json` (or similar).
  * **Method Parameter Value:** `newItem` is a fully constructed `Item` object.

-----

### 4\. Header Values (`@RequestHeader`)

Used to access specific values from the HTTP request headers (e.g., `Authorization`, `Accept-Language`, `User-Agent`).

#### Code Example

```java
@GetMapping("/check")
public String checkHeaders(@RequestHeader("User-Agent") String userAgent) {
    System.out.println("Client is using: " + userAgent);
    return "header-info";
}
```

-----

The next topic in the MVC flow is what happens after the Controller handles the input and prepares the data for presentation: sending the data to the View.
