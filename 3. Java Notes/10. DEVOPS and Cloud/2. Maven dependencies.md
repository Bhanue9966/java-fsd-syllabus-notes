# ðŸš€ DevOps and Cloud

## 2\. Maven Dependencies and Build Lifecycle

### 1\. Dependency Management Basics ðŸ“¦

A **dependency** in Maven is simply an external library (a JAR file) that your project needs to compile, test, or run. Maven automates the entire process of locating, downloading, and including these libraries in your project's **classpath**.

#### A. Declaring a Dependency

Dependencies are declared in the `<dependencies>` section of the **`pom.xml`** file using their unique coordinates: `groupId`, `artifactId`, and `version`.

```xml
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>6.1.0</version>
    </dependency>
</dependencies>
```

#### B. Transitive Dependencies

One of Maven's most powerful features is **transitive dependency management**. If your project depends on Library A, and Library A itself depends on Library B, Maven automatically includes Library B in your project without you having to explicitly declare it.

  * **Benefit:** Reduces the size of your `pom.xml` and minimizes dependency version conflicts.

### 2\. Dependency Scopes ðŸ”­

The **scope** defines the classpath where a dependency will be available during the Maven build lifecycle. This is crucial for controlling which JARs are bundled in the final artifact (e.g., WAR/JAR).

| Scope | Availability (Classpath) | Description | Example |
| :--- | :--- | :--- | :--- |
| **`compile`** | All classpaths (Build, Test, Runtime) | The default scope. Required for compiling, testing, and running the application. | Spring Core, Hibernate |
| **`provided`** | Compile and Test classpaths | Required for compiling/testing, but **assumed to be provided by the runtime environment** (e.g., a web server like Tomcat) and is **not** bundled in the final artifact. | `servlet-api` (for web apps) |
| **`runtime`** | Test and Runtime classpaths | Not needed for compilation, but necessary for execution (runtime). | JDBC drivers |
| **`test`** | Test classpath only | Required only for compiling and running unit tests. **Not** available during application runtime. | JUnit, Mockito |
| **`system`** | All classpaths (like `provided`) | Similar to `provided`, but dependencies must be explicitly supplied via a file path (discouraged). | Native OS libraries |
| **`import`** | N/A (Special) | Only used in the `<dependencyManagement>` section to import dependencies from another POM (often a parent POM). | Spring Boot Parent |

```xml
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-api</artifactId>
    <version>5.10.1</version>
    <scope>test</scope> </dependency>
```

-----

### 3\. How Maven Works: The Build Lifecycle ðŸ”„

Maven's operation is centered around its structured, fixed **build lifecycle**. A lifecycle consists of ordered **phases**, and each phase is executed by one or more **plugins**.

#### A. The Three Standard Lifecycles

Maven has three standard, independent lifecycles:

1.  **`default`**: Handles project deployment. The most important lifecycle.
2.  **`clean`**: Handles project cleanup.
3.  **`site`**: Handles creating the project's documentation site.

#### B. Key Phases of the `default` Lifecycle

When you run a phase, Maven automatically executes all preceding phases in the correct order. For example, running `mvn package` executes `validate`, `compile`, and `test` first.

| Phase | Description | Key Plugins/Action |
| :--- | :--- | :--- |
| **`validate`** | Checks if the project structure is correct and all necessary information is available. | Checks `pom.xml` correctness. |
| **`compile`** | Compiles the source code (`src/main/java`) into bytecode (`.class` files). | Maven Compiler Plugin. |
| **`test`** | Executes all unit tests (files ending in `*Test.java`). If tests fail, the build stops. | Maven Surefire Plugin. |
| **`package`** | Takes the compiled code and packages it into a distributable format (JAR, WAR, or EAR). | Maven JAR/WAR Plugin. |
| **`install`** | Packages the artifact and installs it into the **Local Repository** (your `~/.m2` folder) for use by other local Maven projects. | Maven Install Plugin. |
| **`deploy`** | Copies the final package to the **Remote Repository** (e.g., a company server) for sharing with other developers/systems. | Maven Deploy Plugin. |

#### C. Command Line Execution

You run Maven phases via the command line using the syntax `mvn [phase]`:

  * `mvn clean`: Cleans the project by deleting the `target` directory.
  * `mvn install`: Compiles, tests, packages, and installs the artifact locally.
  * `mvn compile`: Only compiles the source code.

