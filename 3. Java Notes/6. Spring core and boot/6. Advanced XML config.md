# ⚙️ Spring Core and Boot

## 6\. Advanced XML Configuration

While Java-based configuration is the modern standard, XML configuration offers powerful features for managing complex bean definitions and dependencies.

### 1\. Inner Beans (Anonymous Beans)

An **Inner Bean** is a bean defined entirely within the scope of another bean's property or constructor argument.

  * **Mechanism:** It is created by nesting a `<bean>` definition inside a `<property>` or `<constructor-arg>` tag.
  * **Characteristics:**
      * It does **not** have an `id` or `name` attribute.
      * It is strictly a **dependency** for the bean it is defined within.
      * It is always scope **`prototype`** (a new instance is created every time the outer bean is created), meaning it cannot be shared with any other bean.
  * **Use Case:** Use for dependencies that are specific to one bean and should not be reused or referenced elsewhere.

<!-- end list -->

```xml
<bean id="studentA" class="com.telusko.Student">
    <property name="address">
        <!-- This is the Inner Bean: Cannot be referenced outside studentA -->
        <bean class="com.telusko.Address">
            <property name="city" value="Mumbai"/>
        </bean>
    </property>
</bean>
```

### 2\. Bean Aliases

A Bean Alias allows you to assign **multiple names** to the same bean definition.

  * **Mechanism:** You use the `<alias>` tag, specifying the `name` (the original bean ID) and the `alias` (the new name).
  * **Use Case:** Providing application-specific or context-specific names for a generic bean ID without modifying the original definition.

<!-- end list -->

```xml
<bean id="dbConnectionManager" class="com.telusko.DbManager" />

<!-- Assigning an alias to the original bean ID -->
<alias name="dbConnectionManager" alias="prodDB" />
```

Now, `context.getBean("prodDB")` and `context.getBean("dbConnectionManager")` will return the exact same instance.

### 3\. Collection Injection

Spring's XML configuration allows you to inject collections (Lists, Sets, Maps, and Properties) directly into a bean's property using specialized tags within the `<property>` tag.

| Collection Type | XML Tag | Elements |
| :--- | :--- | :--- |
| **List** | `<list>` | Use `<value>` for literals or `<ref>` for bean references. |
| **Set** | `<set>` | Similar to `<list>`, but ensures uniqueness. |
| **Map** | `<map>` | Uses `<entry>` tags with `key` and `value` or `key-ref` and `value-ref`. |
| **Properties** | `<props>` | Uses `<prop>` tags for key-value pairs (both Strings). |

-----

Here are the complete files demonstrating these advanced features:

```java
package com.telusko;

/**
 * Dependency to be used as an Inner Bean.
 */
public class Address {
    
    private String city;
    private String zip;

    public void setCity(String city) {
        this.city = city;
    }

    public void setZip(String zip) {
        this.zip = zip;
    }

    @Override
    public String toString() {
        return "Address [City=" + city + ", Zip=" + zip + "]";
    }
}
```

```java
package com.telusko;

import java.util.List;
import java.util.Map;

/**
 * Class to demonstrate Collection (List and Map) Injection.
 */
public class College {
    
    private String collegeName;
    private List<Student> enrolledStudents; // Target for <list> injection
    private Map<String, Integer> courseFees; // Target for <map> injection

    // Getters and Setters for Collection Injection
    public void setCollegeName(String collegeName) {
        this.collegeName = collegeName;
    }

    public void setEnrolledStudents(List<Student> enrolledStudents) {
        this.enrolledStudents = enrolledStudents;
    }

    public void setCourseFees(Map<String, Integer> courseFees) {
        this.courseFees = courseFees;
    }

    public void displayInfo() {
        System.out.println("College: " + collegeName);
        
        System.out.println("\n--- Enrolled Students (List Injection) ---");
        if (enrolledStudents != null) {
            enrolledStudents.forEach(System.out::println);
        }

        System.out.println("\n--- Course Fees (Map Injection) ---");
        if (courseFees != null) {
            courseFees.forEach((course, fee) -> System.out.println(course + ": $" + fee));
        }
    }
}
```

We've successfully covered advanced XML configuration features including Inner Beans, Aliases, and Collection Injection.
