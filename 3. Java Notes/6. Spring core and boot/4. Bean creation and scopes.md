# ⚙️ Spring Core and Boot

## 4. Bean Creation and Scopes

### 1. The Bean Lifecycle and Creation

A Spring Bean is an object managed by the IoC container. The container is responsible for its creation, assembly (DI), and destruction.

* **Instantiating Beans:** By default, Spring beans are created using the class's default (no-argument) constructor.
* **Eager Instantiation (Default):** The Spring IoC Container typically creates all `singleton` beans immediately upon application startup. This is known as **eager initialization**.

### 2. Bean Scopes

The scope of a bean determines its **lifecycle** and how many instances of that bean are created and managed by the IoC Container.

There are five main scopes in Spring, defined using the `@Scope` annotation (or the `scope` attribute in XML):

#### A. `singleton` (Default Scope)

* **Behavior:** The container creates **exactly one shared instance** of the bean definition.
* **Lifetime:** This single instance is cached and returned for all subsequent requests for that bean. The bean lives as long as the IoC Container lives.
* **Implication:** This is the most common scope and is suitable for stateless beans (e.g., service layers, repositories, utility classes).

#### B. `prototype`

* **Behavior:** The container creates a **new instance** every time the bean is requested.
* **Lifetime:** Spring starts the object, injects dependencies, and hands it over to the client. Spring does **not** manage the complete lifecycle; the client is responsible for destruction.
* **Implication:** Use this for stateful beans where each consumer needs its own unique copy (e.g., shopping carts, wizard forms, thread-safe instances).



#### C. Web-Aware Scopes (For Web Applications)

These scopes are only available when using a web-aware Spring `ApplicationContext` (like in Spring MVC/Boot):

* **`request`:** A new bean instance is created for every single HTTP request.
* **`session`:** A single bean instance is created for the duration of an HTTP Session.
* **`application`:** A single bean instance is created for the entire lifecycle of the web application (similar to a ServletContext attribute).

### 3. Demonstration Summary

The code below defines a simple `Topic` bean and demonstrates two scenarios:

1.  **Singleton Test:** The container returns the same object instance twice, proving the `singleton` behavior.
2.  **Prototype Test:** We change the scope to `prototype`, and the container returns two distinct object instances.

---

Here are the Java files demonstrating Bean Scopes:

```java
package com.telusko;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

/**
 * The Bean we are testing. 
 * Default scope is "singleton". We will change it in the demonstration.
 */
@Component
// Start with singleton scope (which is the default, but explicitly set for clarity)
@Scope("singleton") 
public class Topic {
    
    private String name = "Spring Core";

    public Topic() {
        System.out.println("-> Topic instance created.");
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

We've covered bean creation, and the distinction between `singleton` and `prototype` scopes.