# üîó Collections, Exceptions, Concurrency

## 6\. Exception Theory and Handling

**Exceptions** are events that occur during the execution of a program that disrupt the normal flow of the program's instructions. In Java, exceptions are objects that represent an error or abnormal condition.

### 1\. The Purpose of Exception Handling üõ°Ô∏è

Exception handling is a mechanism to deal with runtime errors, allowing a program to:

1.  **Terminate Gracefully:** Instead of crashing abruptly, the program can report the error and shut down cleanly.
2.  **Resume Execution:** In many cases, the program can recover from the error (e.g., prompting the user to re-enter valid data) and continue running.
3.  **Separate Error Code:** It separates the error-handling code from the main logic, leading to cleaner, more readable code.

### 2\. Exception vs. Error

While both are subclasses of the `Throwable` class, they represent different types of problems:

  * **Exception:** Represents conditions that a well-written application **should catch and handle** (e.g., file not found, network failure, invalid array index).
  * **Error:** Represents serious problems that are usually **beyond the control of the application** and should not be caught (e.g., `OutOfMemoryError`, `StackOverflowError`). The application cannot typically recover from an `Error`.

### 3\. Exception Handling Keywords

Java uses five keywords to manage exception flow: `try`, `catch`, `finally`, `throw`, and `throws`.

#### A. The `try` Block

  * The code that **might throw an exception** is placed inside the `try` block.
  * A `try` block **must** be immediately followed by a `catch` block or a `finally` block.

#### B. The `catch` Block

  * Used to **handle** the exception that was thrown in the preceding `try` block.
  * It takes one argument: the type of exception it is designed to handle.
  * A `try` block can be followed by multiple `catch` blocks (polymorphism applies here, where a `catch` block for a superclass exception will catch all its subclasses).

#### C. The `finally` Block

  * The code within the `finally` block is **always executed**, regardless of whether an exception was thrown, caught, or if the `try` block completed normally.
  * **Purpose:** Used for cleanup operations (e.g., closing file streams, database connections, or network sockets).

### 4\. Implementation Example

```java
public class ExceptionHandlingDemo {
    public static void main(String[] args) {
        int a = 10;
        int b = 0; // Will cause ArithmeticException
        
        try {
            System.out.println("--- Inside try block ---");
            // 1. Exception occurs here: a / b
            int result = a / b; 
            System.out.println("Result: " + result); 
            
        } catch (ArithmeticException e) {
            // 2. Control immediately jumps to the matching catch block
            System.out.println("--- Inside catch block ---");
            System.err.println("Error: Cannot divide by zero."); 
            
            // Getting information about the exception
            System.err.println("Exception message: " + e.getMessage()); 
            
        } finally {
            // 3. This block always executes, regardless of the exception
            System.out.println("--- Inside finally block (Cleanup) ---"); 
        }
        
        // 4. Program execution continues after the try-catch-finally block
        System.out.println("Program finished executing.");
    }
}
```

**Execution Flow:**

1.  `try` starts.
2.  `a / b` throws `ArithmeticException`.
3.  The program immediately jumps to the matching `catch (ArithmeticException e)`.
4.  The `catch` block executes its code.
5.  The `finally` block executes.
6.  The program continues with `System.out.println("Program finished executing.")`.

