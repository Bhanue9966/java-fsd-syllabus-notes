# üíæ 8. Spring Data

## 10-react-integration-crud.md

### ‚úèÔ∏è Integrating React for Data Modification (CRUD)

While searching (GET) is about retrieving data, **Create (POST), Update (PUT), and Delete (DELETE)** are action-oriented operations that require the client to send specific HTTP requests and often data bodies. The key difference from GET requests is the mandatory inclusion of the **`Content-Type: application/json`** header.

### 1\. Create Operation (POST)

The client uses `POST` to send a new resource object (as JSON) to the collection URI.

#### Spring Endpoint Signature:

The Spring Controller uses `@PostMapping` and `@RequestBody` to receive the JSON data and automatically deserialize it into a DTO.

```java
// Spring Boot (Backend)
@PostMapping 
public ResponseEntity<JobPostingDto> createJob(@RequestBody JobPostingDto jobDto) {
    // ... logic to save jobEntity and return 201 CREATED ...
    return new ResponseEntity<>(savedDto, HttpStatus.CREATED);
}
```

#### React Frontend Implementation:

The React component gathers form data and sends it as a JSON payload.

```javascript
// React Frontend (Using fetch)
const BASE_URL = 'http://localhost:8080/api/jobs';

const handleCreate = async (newJobData) => {
  const response = await fetch(BASE_URL, {
    method: 'POST',
    // üîë Crucial: Tells the server the body is JSON
    headers: {
      'Content-Type': 'application/json',
    },
    // Convert the JavaScript object into a JSON string
    body: JSON.stringify(newJobData), 
  });

  if (response.status === 201) {
    console.log('Job created successfully!');
    // Typically, refresh the list of jobs or navigate the user
  } else {
    // Handle error (e.g., 400 Bad Request from validation failure)
    const errorBody = await response.json();
    console.error('Creation failed:', errorBody);
  }
};
```

-----

### 2\. Update Operation (PUT)

The client uses `PUT` to completely replace the resource at a specific ID. The resource ID is included in the URI path, and the full, updated object is sent in the body.

#### Spring Endpoint Signature:

The Spring Controller uses `@PutMapping` and `@PathVariable` for the ID, and `@RequestBody` for the data.

```java
// Spring Boot (Backend)
@PutMapping("/{id}") 
public ResponseEntity<JobPostingDto> updateJob(
    @PathVariable Long id, 
    @RequestBody JobPostingDto updatedDto) {
    
    // ... logic to find by ID, update fields, save, and return 200 OK ...
    return ResponseEntity.ok(updatedDto);
}
```

#### React Frontend Implementation:

The request includes the ID in the path and the updated JSON object in the body.

```javascript
// React Frontend (Using fetch)
const BASE_URL = 'http://localhost:8080/api/jobs';

const handleUpdate = async (jobId, updatedData) => {
  const response = await fetch(`${BASE_URL}/${jobId}`, {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(updatedData),
  });

  if (response.status === 200) {
    console.log(`Job ID ${jobId} updated successfully!`);
    // Refresh the component state to show updated data
  } else if (response.status === 404) {
    console.error('Job not found.');
  }
};
```

-----

### 3\. Delete Operation (DELETE)

The client uses `DELETE` to remove a resource specified by its ID in the URI path. **Delete requests typically do not have a request body.**

#### Spring Endpoint Signature:

The Spring Controller uses `@DeleteMapping` and `@PathVariable`. A successful delete often returns **204 No Content**.

```java
// Spring Boot (Backend)
@DeleteMapping("/{id}")
public ResponseEntity<Void> deleteJob(@PathVariable Long id) {
    // ... logic to call service.deleteById(id) ...
    // If successful, returns status 204
    return new ResponseEntity<>(HttpStatus.NO_CONTENT); 
}
```

#### React Frontend Implementation:

The request only needs the URI, the `DELETE` method, and no body.

```javascript
// React Frontend (Using fetch)
const BASE_URL = 'http://localhost:8080/api/jobs';

const handleDelete = async (jobId) => {
  const response = await fetch(`${BASE_URL}/${jobId}`, {
    method: 'DELETE',
  });

  if (response.status === 204) {
    console.log(`Job ID ${jobId} deleted successfully!`);
    // Remove the item from the local results array to update the UI
  } else if (response.status === 404) {
    console.error('Job not found for deletion.');
  }
};
```
